/*! hotel-datepicker 3.3.0 - Copyright 2017 Benito Lopez (http://lopezb.com) - https://github.com/benitolopez/hotel-datepicker - MIT */
var HotelDatepicker=function(){"use strict";var t=0,e=function t(e,i){this._boundedEventHandlers={},this.id=t.getNewId();var s=i||{};this.format=s.format||"DD-MM-YYYY",this.infoFormat=s.infoFormat||this.format,this.separator=s.separator||" - ",this.startOfWeek=s.startOfWeek||"sunday",this.startDate=s.startDate||new Date("2017-01-01T00:00:00+05:30"),this.endDate=s.endDate||new Date,this.endHour=s.endTime?s.endTime.split(":")[0]:fecha.format(new Date,"HH"),this.endMin=s.endTime?s.endTime.split(":")[1]:fecha.format(new Date,"mm"),this.minNights=s.minNights||0,this.maxNights=s.maxNights||0,this.selectForward=s.selectForward||!1,this.disabledDates=s.disabledDates||[],this.noCheckInDates=s.noCheckInDates||[],this.noCheckOutDates=s.noCheckOutDates||[],this.enableCheckout=s.enableCheckout||!1,this.container=s.container||"",this.animationSpeed=s.animationSpeed||".5s",this.hoveringTooltip=s.hoveringTooltip||!0,this.autoClose=void 0!==s.autoClose&&s.autoClose,this.showTopbar=void 0!==s.showTopbar&&s.showTopbar,this.moveBothMonths=s.moveBothMonths||!1,this.i18n=s.i18n||{selected:"Date range:",night:"Day",nights:"Days",button:"Close","checkin-disabled":"Check-in disabled","checkout-disabled":"Check-out disabled","day-names-short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"day-names":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"month-names-short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"month-names":["January","February","March","April","May","June","July","August","September","October","November","December"],"error-more":"Date range should not be more than 1 day","error-more-plural":"Date range should not be more than %d days","error-less":"Date range should not be less than 1 day","error-less-plural":"Date range should not be less than %d days","info-more":"Please select a date range longer than 1 day","info-more-plural":"Please select a date range longer than %d days","info-range":"Please select a date range between %d and %d days","info-default":"Please select a date range"},this.getValue=s.getValue||function(){return e.value},this.setValue=s.setValue||function(t){var i=document.getElementById(e.id+"StartHourValue").value,s=document.getElementById(e.id+"StartMinValue").value,a=document.getElementById(e.id+"EndHourValue").value,n=document.getElementById(e.id+"EndMinValue").value,o=t.split(this.separator),r=o[0]+" "+this.pad(i,2)+":"+this.pad(s,2)+this.separator+o[1]+" "+this.pad(a,2)+":"+this.pad(n,2);e.value=r},this.onDayClick=void 0!==s.onDayClick&&s.onDayClick,this.onOpenDatepicker=void 0!==s.onOpenDatepicker&&s.onOpenDatepicker,this.input=e,this.init()};return e.prototype.addBoundedListener=function(t,e,i,s){t in this._boundedEventHandlers||(this._boundedEventHandlers[t]={}),e in this._boundedEventHandlers[t]||(this._boundedEventHandlers[t][e]=[]);var a=i.bind(this);this._boundedEventHandlers[t][e].push([a,s]),t.addEventListener(e,a,s)},e.prototype.removeAllBoundedListeners=function(t,e){if(t in this._boundedEventHandlers){var i=this._boundedEventHandlers[t];if(e in i)for(var s=i[e],a=s.length;a--;){var n=s[a];t.removeEventListener(e,n[0],n[1])}}},e.getNewId=function(){return++t},e.prototype.setFechaI18n=function(){fecha.i18n.dayNamesShort=this.i18n["day-names-short"],fecha.i18n.dayNames=this.i18n["day-names"],fecha.i18n.monthNamesShort=this.i18n["month-names-short"],fecha.i18n.monthNames=this.i18n["month-names"]},e.prototype.getWeekDayNames=function(){var t="";if("monday"===this.startOfWeek){for(var e=0;e<7;e++)t+='<th class="datepicker__week-name">'+this.lang("day-names-short")[(1+e)%7]+"</th>";return t}for(var i=0;i<7;i++)t+='<th class="datepicker__week-name">'+this.lang("day-names-short")[i]+"</th>";return t},e.prototype.getMonthDom=function(t){return document.getElementById(this.getMonthTableId(t))},e.prototype.getMonthName=function(t){return this.lang("month-names")[t]},e.prototype.getDatepickerId=function(){return"datepicker-"+this.generateId()},e.prototype.getMonthTableId=function(t){return"month-"+t+"-"+this.generateId()},e.prototype.getCloseButtonId=function(){return"close-"+this.generateId()},e.prototype.getTooltipId=function(){return"tooltip-"+this.generateId()},e.prototype.getNextMonth=function(t){var e=new Date(t.valueOf());return new Date(e.setMonth(e.getMonth()+1))},e.prototype.getPrevMonth=function(t){var e=new Date(t.valueOf());return new Date(e.setMonth(e.getMonth()-1))},e.prototype.getDateString=function(t,e){return void 0===e&&(e=this.format),this.setFechaI18n(),fecha.format(t,e)},e.prototype.parseDate=function(t,e){return void 0===e&&(e=this.format),this.setFechaI18n(),fecha.parse(t,e)},e.prototype.init=function(){var t,e,i,s;this.parent=this.container?this.container:this.input.parentElement,this.start=!1,this.end=!1,this.minDays=this.minNights>1?this.minNights+1:2,this.maxDays=this.maxNights>0?this.maxNights+1:0,this.startDate&&"string"==typeof this.startDate&&(this.startDate=this.parseDate(this.startDate)),this.endDate&&"string"==typeof this.endDate&&(this.endDate=this.parseDate(this.endDate)),this.isTouchDevice()&&(this.hoveringTooltip=!1),this.isOpen=!1,this.changed=!1,this.createDom(),document.getElementById(this.input.id+"StartHourValue").oninput=(t=this,function(){t.onTimeChanged(t)}),document.getElementById(this.input.id+"StartMinValue").oninput=(e=this,function(){e.onTimeChanged(e)}),document.getElementById(this.input.id+"EndHourValue").oninput=(i=this,function(){i.onTimeChanged(i)}),document.getElementById(this.input.id+"EndMinValue").oninput=(s=this,function(){s.onTimeChanged(s)});var a=new Date;this.startDate&&this.compareMonth(a,this.startDate)<0&&(a=this.startDate),this.endDate&&this.compareMonth(this.getNextMonth(a),this.endDate)>0&&(a=this.getPrevMonth(this.endDate)),this.showMonth(a,1),this.showMonth(this.getNextMonth(a),2),this.topBarDefaultText(),this.disabledDates.length>0&&this.parseDisabledDates(),this.addListeners()},e.prototype.addListeners=function(){for(var t=this,e=this.datepicker.getElementsByClassName("datepicker__month-button--next"),i=0;i<e.length;i++)e[i].addEventListener("click",function(e){return t.goToNextMonth(e)});for(var s=this.datepicker.getElementsByClassName("datepicker__month-button--prev"),a=0;a<s.length;a++)s[a].addEventListener("click",function(e){return t.goToPreviousMonth(e)});this.addBoundedListener(this.input,"click",function(e){return t.openDatepicker(e)}),this.showTopbar&&document.getElementById(this.getCloseButtonId()).addEventListener("click",function(e){return t.closeDatepicker(e)}),this.datepicker.addEventListener("mouseover",function(e){return t.datepickerHover(e)}),this.datepicker.addEventListener("mouseout",function(e){return t.datepickerMouseOut(e)}),this.addBoundedListener(this.input,"change",function(){return t.checkAndSetDefaultValue()})},e.prototype.generateId=function(){return this.input.id?this.input.id:this.id},e.prototype.createDom=function(){var t=this.createDatepickerDomString();this.parent.insertAdjacentHTML("beforeend",t),this.datepicker=document.getElementById(this.getDatepickerId())},e.prototype.createDatepickerDomString=function(){var t='<div id="'+this.getDatepickerId()+'" style="display:none" class="datepicker datepicker--closed">';t+='<div class="datepicker__inner">',this.showTopbar&&(t+='<div class="datepicker__topbar"><div class="datepicker__info datepicker__info--selected"><span class="datepicker__info datepicker__info--selected-label">'+this.lang("selected")+' </span> <strong class="datepicker__info-text datepicker__info-text--start-day">...</strong> <span class="datepicker__info-text datepicker__info--separator">'+this.separator+'</span> <strong class="datepicker__info-text datepicker__info-text--end-day">...</strong> <em class="datepicker__info-text datepicker__info-text--selected-days">(<span></span>)</em></div><div class="datepicker__info datepicker__info--feedback"></div><button type="button" id="'+this.getCloseButtonId()+'" class="datepicker__close-button">'+this.lang("button")+"</button></div>"),t+='<div class="datepicker__months">';for(var e=1;e<=2;e++)t+='<table id="'+this.getMonthTableId(e)+'" class="datepicker__month datepicker__month--month'+e+'"><thead><tr class="datepicker__month-caption"><th><span class="datepicker__month-button datepicker__month-button--prev" month="'+e+'">&lt;</span></th><th colspan="5" class="datepicker__month-name"></th><th><span class="datepicker__month-button datepicker__month-button--next" month="'+e+'">&gt;</span></th></tr><tr class="datepicker__week-days">'+this.getWeekDayNames(e)+"</tr></thead><tbody></tbody></table>";return t+='<div style="width:100%;display: inline-flex; margin-top: 10px;"><div style="flex-basis: 50%; text-align: center;">Start time: <input id="'+this.input.id+'StartHourValue" type="number" value="00" min="00" max="23" style="width:50px; padding: 5px 5px;""/> : <input id="'+this.input.id+'StartMinValue" type="number" value="00" min="00" max="59" style="width:50px; padding: 5px 5px;"/></div><div style="flex-basis: 50%; text-align: center;">End time: <input id="'+this.input.id+'EndHourValue" type="number" min="00" max="23" value="'+this.endHour+'" style="width:50px; padding: 5px 5px;"/> : <input id="'+this.input.id+'EndMinValue" type="number" min="00" max="59" value="'+this.endMin+'" style="width:50px; padding: 5px 5px;"/></div></div>',t+="</div>",t+='<div style="display:none" id="'+this.getTooltipId()+'" class="datepicker__tooltip"></div>',t+="</div>",t+="</div>"},e.prototype.showMonth=function(t,e){var i=this.getMonthName(t.getMonth()),s=this.getMonthDom(e),a=s.getElementsByClassName("datepicker__month-name")[0],n=s.getElementsByTagName("tbody")[0];a.textContent=i+" "+t.getFullYear(),this.emptyElement(n),n.insertAdjacentHTML("beforeend",this.createMonthDomString(t)),this.updateSelectableRange(),this["month"+e]=t},e.prototype.createMonthDomString=function(t){var e,i=this,s=[],a="";t.setDate(1);var n=t.getDay(),o=t.getMonth();if(0===n&&"monday"===this.startOfWeek&&(n=7),n>0)for(var r=n;r>0;r--){var h=new Date(t.getTime()-864e5*r);e=i.isValidDate(h.getTime()),(i.startDate&&i.compareDay(h,i.startDate)<0||i.endDate&&i.compareDay(h,i.endDate)>0)&&(e=!1),s.push({date:h,type:"lastMonth",day:h.getDate(),time:h.getTime(),valid:e})}for(var d=0;d<40;d++){var l=i.addDays(t,d);e=i.isValidDate(l.getTime()),(i.startDate&&i.compareDay(l,i.startDate)<0||i.endDate&&i.compareDay(l,i.endDate)>0)&&(e=!1),s.push({date:l,type:l.getMonth()===o?"visibleMonth":"nextMonth",day:l.getDate(),time:l.getTime(),valid:e})}for(var p=0;p<6&&"nextMonth"!==s[7*p].type;p++){var c=0;a+='<tr class="datepicker__week-row">';for(var m=0;m<7;m++){var u="monday"===i.startOfWeek?m+1:m;u=s[7*p+u];var g=i.getDateString(u.time)===i.getDateString(new Date),y=!1,D=!1,f=!1;if(u.valid){var v=i.getDateString(u.time,"YYYY-MM-DD");i.disabledDates.length>0&&(i.disabledDates.indexOf(v)>-1?(u.valid=!1,y=!0,c++):c=0),i.noCheckInDates.length>0&&i.noCheckInDates.indexOf(v)>-1&&(D=!0),i.noCheckOutDates.length>0&&i.noCheckOutDates.indexOf(v)>-1&&(f=!0)}var k=["datepicker__month-day--"+u.type,"datepicker__month-day--"+(u.valid?"valid":"invalid"),g?"datepicker__month-day--today":"",y?"datepicker__month-day--disabled":"",y&&i.enableCheckout&&1===c?"datepicker__month-day--checkout-enabled":"",D?"datepicker__month-day--no-check-in":"",f?"datepicker__month-day--no-check-out":""],_="";D&&(_=i.i18n["checkin-disabled"]),f&&(_&&(_+=". "),_+=i.i18n["checkout-disabled"]);var b={time:u.time,class:k.join(" ")};_&&(b.title=_),a+='<td class="datepicker__month-day '+b.class+'" '+i.printAttributes(b)+">"+u.day+"</td>"}a+="</tr>"}return a},e.prototype.openDatepicker=function(){var t=this;this.isOpen||(this.removeClass(this.datepicker,"datepicker--closed"),this.addClass(this.datepicker,"datepicker--open"),this.checkAndSetDefaultValue(),this.slideDown(this.datepicker,this.animationSpeed),this.isOpen=!0,this.showSelectedDays(),this.disableNextPrevButtons(),this.addBoundedListener(document,"click",function(e){return t.documentClick(e)}),this.onOpenDatepicker&&this.onOpenDatepicker())},e.prototype.closeDatepicker=function(){if(this.isOpen){this.removeClass(this.datepicker,"datepicker--open"),this.addClass(this.datepicker,"datepicker--closed"),this.slideUp(this.datepicker,this.animationSpeed),this.isOpen=!1;var t=document.createEvent("Event");t.initEvent("afterClose",!0,!0),this.input.dispatchEvent(t),this.removeAllBoundedListeners(document,"click")}},e.prototype.autoclose=function(){this.autoClose&&this.changed&&this.isOpen&&this.start&&this.end&&this.closeDatepicker()},e.prototype.documentClick=function(t){this.parent.contains(t.target)||t.target===this.input?"td"===t.target.tagName.toLowerCase()&&this.dayClicked(t.target):this.closeDatepicker()},e.prototype.datepickerHover=function(t){t.target.tagName&&"td"===t.target.tagName.toLowerCase()&&this.dayHovering(t.target)},e.prototype.datepickerMouseOut=function(t){t.target.tagName&&"td"===t.target.tagName.toLowerCase()&&(document.getElementById(this.getTooltipId()).style.display="none")},e.prototype.checkAndSetDefaultValue=function(){var t=this.getValue(),e=t?t.split(this.separator):"";if(e&&e.length>=2){var i=this.format;i.match(/Do/)&&(i=i.replace(/Do/,"D"),e[0]=e[0].replace(/(\d+)(th|nd|st)/,"$1"),e[1]=e[1].replace(/(\d+)(th|nd|st)/,"$1")),this.changed=!1,this.setDateRange(this.parseDate(e[0],i),this.parseDate(e[1],i)),this.changed=!0}else if(this.showTopbar){this.datepicker.getElementsByClassName("datepicker__info--selected")[0].style.display="none"}},e.prototype.setDateRange=function(t,e){if(t.getTime()>e.getTime()){var i=e;e=t,t=i,i=null}var s=!0;if((this.startDate&&this.compareDay(t,this.startDate)<0||this.endDate&&this.compareDay(e,this.endDate)>0)&&(s=!1),!s)return this.showMonth(this.startDate,1),this.showMonth(this.getNextMonth(this.startDate),2),this.showSelectedDays(),void this.disableNextPrevButtons();t.setTime(t.getTime()+432e5),e.setTime(e.getTime()+432e5),this.start=t.getTime(),this.end=e.getTime(),this.compareDay(t,e)>0&&0===this.compareMonth(t,e)&&(e=this.getNextMonth(t)),0===this.compareMonth(t,e)&&(e=this.getNextMonth(t)),this.showMonth(t,1),this.showMonth(e,2),this.showSelectedDays(),this.disableNextPrevButtons(),this.checkSelection(),this.showSelectedInfo(),this.autoclose()},e.prototype.showSelectedDays=function(){var t=this;if(this.start||this.end)for(var e=this.datepicker.getElementsByTagName("td"),i=0;i<e.length;i++){var s=parseInt(e[i].getAttribute("time"),10);t.start&&t.end&&t.end>=s&&t.start<=s||t.start&&!t.end&&t.getDateString(t.start,"YYYY-MM-DD")===t.getDateString(s,"YYYY-MM-DD")?t.addClass(e[i],"datepicker__month-day--selected"):t.removeClass(e[i],"datepicker__month-day--selected"),t.start&&t.getDateString(t.start,"YYYY-MM-DD")===t.getDateString(s,"YYYY-MM-DD")?t.addClass(e[i],"datepicker__month-day--first-day-selected"):t.removeClass(e[i],"datepicker__month-day--first-day-selected"),t.end&&t.getDateString(t.end,"YYYY-MM-DD")===t.getDateString(s,"YYYY-MM-DD")?t.addClass(e[i],"datepicker__month-day--last-day-selected"):t.removeClass(e[i],"datepicker__month-day--last-day-selected")}},e.prototype.showSelectedInfo=function(){if(this.showTopbar){var t=this.datepicker.getElementsByClassName("datepicker__info--selected")[0],e=t.getElementsByClassName("datepicker__info-text--start-day")[0],i=t.getElementsByClassName("datepicker__info-text--end-day")[0],s=t.getElementsByClassName("datepicker__info-text--selected-days")[0],a=document.getElementById(this.getCloseButtonId());if(e.textContent="...",i.textContent="...",s.style.display="none",this.start&&(t.style.display="",e.textContent=this.getDateString(new Date(parseInt(this.start,10)),this.infoFormat)),this.end&&(i.textContent=this.getDateString(new Date(parseInt(this.end,10)),this.infoFormat)),this.start&&this.end){var n=this.countDays(this.end,this.start)-1,o=1===n?n+" "+this.lang("night"):n+" "+this.lang("nights"),r=this.getDateString(new Date(this.start))+this.separator+this.getDateString(new Date(this.end));s.style.display="",s.firstElementChild.textContent=o,a.disabled=!1,this.setValue(r,this.getDateString(new Date(this.start)),this.getDateString(new Date(this.end))),this.changed=!0}else a.disabled=!0}else if(this.start&&this.end){var h=this.getDateString(new Date(this.start))+this.separator+this.getDateString(new Date(this.end));this.dateRange=h,this.setValue(h,this.getDateString(new Date(this.start)),this.getDateString(new Date(this.end))),this.changed=!0}},e.prototype.dayClicked=function(t){if(!this.hasClass(t,"datepicker__month-day--invalid")){var e=this.start&&this.end||!this.start&&!this.end;if(e){if(this.hasClass(t,"datepicker__month-day--no-check-in"))return}else if(this.start&&this.hasClass(t,"datepicker__month-day--no-check-out"))return;var i=parseInt(t.getAttribute("time"),10);if(this.addClass(t,"datepicker__month-day--selected"),e?(this.start=i,this.end=!1):this.start&&(this.end=i),this.start&&this.end&&this.start>this.end){var s=this.end;this.end=this.start,this.start=s}this.start=parseInt(this.start,10),this.end=parseInt(this.end,10),this.clearHovering(),this.start&&!this.end&&this.dayHovering(t),this.updateSelectableRange(),this.checkSelection(),this.showSelectedInfo(),this.showSelectedDays(),this.autoclose(),this.onDayClick&&this.onDayClick()}},e.prototype.isValidDate=function(t){if(t=parseInt(t,10),this.startDate&&this.compareDay(t,this.startDate)<0||this.endDate&&this.compareDay(t,this.endDate)>0)return!1;if(this.start&&!this.end){if(this.maxDays>0&&this.countDays(t,this.start)>this.maxDays||this.minDays>0&&this.countDays(t,this.start)<this.minDays)return!1;if(this.selectForward&&t<this.start)return!1;if(this.disabledDates.length>0){var e=this.getClosestDates(new Date(parseInt(this.start,10)));if(e[0]&&this.compareDay(t,e[0])<=0)return!1;if(e[1]&&this.compareDay(t,e[1])>=0)return!1}}return!0},e.prototype.checkSelection=function(){var t=this,e=Math.ceil((this.end-this.start)/864e5)+1,i=!!this.showTopbar&&this.datepicker.getElementsByClassName("datepicker__info--feedback")[0];if(this.maxDays&&e>this.maxDays){this.start=!1,this.end=!1;for(var s=this.datepicker.getElementsByTagName("td"),a=0;a<s.length;a++)t.removeClass(s[a],"datepicker__month-day--selected"),t.removeClass(s[a],"datepicker__month-day--first-day-selected"),t.removeClass(s[a],"datepicker__month-day--last-day-selected");if(this.showTopbar){var n=this.maxDays-1;this.topBarErrorText(i,"error-more",n)}}else if(this.minDays&&e<this.minDays){this.start=!1,this.end=!1;for(var o=this.datepicker.getElementsByTagName("td"),r=0;r<o.length;r++)t.removeClass(o[r],"datepicker__month-day--selected"),t.removeClass(o[r],"datepicker__month-day--first-day-selected"),t.removeClass(o[r],"datepicker__month-day--last-day-selected");if(this.showTopbar){var h=this.minDays-1;this.topBarErrorText(i,"error-less",h)}}else this.start||this.end?this.showTopbar&&(this.removeClass(i,"datepicker__info--error"),this.removeClass(i,"datepicker__info--help")):this.showTopbar&&(this.removeClass(i,"datepicker__info--error"),this.addClass(i,"datepicker__info--help"))},e.prototype.addDays=function(t,e){var i=new Date(t);return i.setDate(i.getDate()+e),i},e.prototype.countDays=function(t,e){return Math.abs(this.daysFrom1970(t)-this.daysFrom1970(e))+1},e.prototype.compareDay=function(t,e){var i=parseInt(this.getDateString(t,"YYYYMMDD"),10)-parseInt(this.getDateString(e,"YYYYMMDD"),10);return i>0?1:0===i?0:-1},e.prototype.compareMonth=function(t,e){var i=parseInt(this.getDateString(t,"YYYYMM"),10)-parseInt(this.getDateString(e,"YYYYMM"),10);return i>0?1:0===i?0:-1},e.prototype.daysFrom1970=function(t){return Math.floor(this.toLocalTimestamp(t)/864e5)},e.prototype.toLocalTimestamp=function(t){return"object"==typeof t&&t.getTime&&(t=t.getTime()),"string"!=typeof t||t.match(/\d{13}/)||(t=this.parseDate(t).getTime()),t=parseInt(t,10)-60*(new Date).getTimezoneOffset()*1e3},e.prototype.printAttributes=function(t){var e=t,i="";for(var s in t)Object.prototype.hasOwnProperty.call(e,s)&&(i+=s+'="'+e[s]+'" ');return i},e.prototype.goToNextMonth=function(t){var e=t.target.getAttribute("month"),i=e>1,s=i?this.month2:this.month1;s=this.getNextMonth(s),!this.isSingleMonth()&&!i&&this.compareMonth(s,this.month2)>=0||this.isMonthOutOfRange(s)||(this.moveBothMonths&&i&&this.showMonth(this.month2,1),this.showMonth(s,e),this.showSelectedDays(),this.disableNextPrevButtons())},e.prototype.goToPreviousMonth=function(t){var e=t.target.getAttribute("month"),i=e>1,s=i?this.month2:this.month1;s=this.getPrevMonth(s),i&&this.compareMonth(s,this.month1)<=0||this.isMonthOutOfRange(s)||(this.moveBothMonths&&!i&&this.showMonth(this.month1,2),this.showMonth(s,e),this.showSelectedDays(),this.disableNextPrevButtons())},e.prototype.isSingleMonth=function(){return!this.isVisible(this.getMonthDom(2))},e.prototype.isMonthOutOfRange=function(t){var e=new Date(t.valueOf());return!!(this.startDate&&new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59)<this.startDate||this.endDate&&new Date(e.getFullYear(),e.getMonth(),1)>this.endDate)},e.prototype.disableNextPrevButtons=function(){if(!this.isSingleMonth()){var t=parseInt(this.getDateString(this.month1,"YYYYMM"),10),e=parseInt(this.getDateString(this.month2,"YYYYMM"),10),i=Math.abs(t-e),s=this.datepicker.getElementsByClassName("datepicker__month-button--next")[0],a=this.datepicker.getElementsByClassName("datepicker__month-button--prev")[1];i>1&&89!==i?(this.removeClass(s,"datepicker__month-button--disabled"),this.removeClass(a,"datepicker__month-button--disabled")):(this.addClass(s,"datepicker__month-button--disabled"),this.addClass(a,"datepicker__month-button--disabled"))}},e.prototype.topBarDefaultText=function(){if(this.showTopbar){var t="";t=this.minDays&&this.maxDays?this.lang("info-range"):this.minDays&&this.minDays>2?this.lang("info-more-plural"):this.minDays?this.lang("info-more"):this.lang("info-default");var e=this.datepicker.getElementsByClassName("datepicker__info--feedback")[0];t=t.replace(/%d/,this.minDays-1).replace(/%d/,this.maxDays-1),this.addClass(e,"datepicker__info--help"),this.removeClass(e,"datepicker__info--error"),e.textContent=t}},e.prototype.topBarErrorText=function(t,e,i){this.showTopbar&&(this.addClass(t,"datepicker__info--error"),this.removeClass(t,"datepicker__info--help"),i>1?(e=(e=this.lang(e+"-plural")).replace("%d",i),t.textContent=e):e=this.lang(e),this.datepicker.getElementsByClassName("datepicker__info--selected")[0].style.display="none")},e.prototype.updateSelectableRange=function(){for(var t=this,e=this.datepicker.getElementsByTagName("td"),i=this.start&&!this.end,s=0;s<e.length;s++)if(t.hasClass(e[s],"datepicker__month-day--invalid")&&t.hasClass(e[s],"datepicker__month-day--tmp")&&(t.removeClass(e[s],"datepicker__month-day--invalid"),t.removeClass(e[s],"datepicker__month-day--tmp"),t.addClass(e[s],"datepicker__month-day--valid")),i){if(t.hasClass(e[s],"datepicker__month-day--visibleMonth")&&(t.hasClass(e[s],"datepicker__month-day--valid")||t.hasClass(e[s],"datepicker__month-day--disabled"))){var a=parseInt(e[s].getAttribute("time"),10);t.isValidDate(a)?(t.addClass(e[s],"datepicker__month-day--valid"),t.addClass(e[s],"datepicker__month-day--tmp"),t.removeClass(e[s],"datepicker__month-day--invalid"),t.removeClass(e[s],"datepicker__month-day--disabled")):(t.addClass(e[s],"datepicker__month-day--invalid"),t.addClass(e[s],"datepicker__month-day--tmp"),t.removeClass(e[s],"datepicker__month-day--valid"))}}else t.hasClass(e[s],"datepicker__month-day--checkout-enabled")&&(t.addClass(e[s],"datepicker__month-day--invalid"),t.removeClass(e[s],"datepicker__month-day--valid"),t.addClass(e[s],"datepicker__month-day--disabled"));return!0},e.prototype.dayHovering=function(t){var e=this,i=parseInt(t.getAttribute("time"),10),s="";if(!this.hasClass(t,"datepicker__month-day--invalid")){for(var a=this.datepicker.getElementsByTagName("td"),n=0;n<a.length;n++){var o=parseInt(a[n].getAttribute("time"),10);o===i?e.addClass(a[n],"datepicker__month-day--hovering"):e.removeClass(a[n],"datepicker__month-day--hovering"),e.start&&!e.end&&(e.start<o&&i>=o||e.start>o&&i<=o)?e.addClass(a[n],"datepicker__month-day--hovering"):e.removeClass(a[n],"datepicker__month-day--hovering")}if(this.start&&!this.end){var r=this.countDays(i,this.start)-1;if(this.hoveringTooltip)if("function"==typeof this.hoveringTooltip)s=this.hoveringTooltip(r,this.start,i);else if(!0===this.hoveringTooltip&&r>0){s=r+" "+(1===r?this.lang("night"):this.lang("nights"))}}}if(s){var h=t.getBoundingClientRect(),d=this.datepicker.getBoundingClientRect(),l=h.left-d.left,p=h.top-d.top;l+=h.width/2;var c=document.getElementById(this.getTooltipId());c.style.display="",c.textContent=s;var m=c.getBoundingClientRect().width,u=c.getBoundingClientRect().height;l-=m/2,p-=u,setTimeout(function(){c.style.left=l+"px",c.style.top=p+"px"},10)}else{document.getElementById(this.getTooltipId()).style.display="none"}},e.prototype.clearHovering=function(){for(var t=this.datepicker.getElementsByTagName("td"),e=0;e<t.length;e++)this.removeClass(t[e],"datepicker__month-day--hovering");document.getElementById(this.getTooltipId()).style.display="none"},e.prototype.clearSelection=function(){this.start=!1,this.end=!1;for(var t=this.datepicker.getElementsByTagName("td"),e=0;e<t.length;e++)this.removeClass(t[e],"datepicker__month-day--selected"),this.removeClass(t[e],"datepicker__month-day--first-day-selected"),this.removeClass(t[e],"datepicker__month-day--last-day-selected");this.setValue(""),this.checkSelection(),this.showSelectedInfo(),this.showSelectedDays()},e.prototype.parseDisabledDates=function(){var t=[];this.setFechaI18n();for(var e=0;e<this.disabledDates.length;e++)t[e]=fecha.parse(this.disabledDates[e],"YYYY-MM-DD");t.sort(function(t,e){return t-e}),this.disabledDatesTime=t},e.prototype.getClosestDates=function(t){var e=[!1,!1];if(t<this.disabledDatesTime[0])e=this.enableCheckout?[!1,this.addDays(this.disabledDatesTime[0],1)]:[!1,this.disabledDatesTime[0]];else if(t>this.disabledDatesTime[this.disabledDatesTime.length-1])e=[this.disabledDatesTime[this.disabledDatesTime.length-1],!1];else{var i,s=this.disabledDatesTime.length,a=this.disabledDatesTime.length,n=Math.abs(new Date(0,0,0).valueOf()),o=n,r=-n,h=0;for(i=0;i<this.disabledDatesTime.length;++i)(h=t-this.disabledDatesTime[i])<0&&h>r&&(a=i,r=h),h>0&&h<o&&(s=i,o=h);this.disabledDatesTime[s]&&(e[0]=this.disabledDatesTime[s]),void 0===this.disabledDatesTime[s]?e[1]=!1:this.enableCheckout?e[1]=this.addDays(this.disabledDatesTime[a],1):e[1]=this.disabledDatesTime[a]}return e},e.prototype.lang=function(t){return t in this.i18n?this.i18n[t]:""},e.prototype.emptyElement=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.classRegex=function(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")},e.prototype.hasClass=function(t,e){return this.classRegex(e).test(t.className)},e.prototype.addClass=function(t,e){this.hasClass(t,e)||(t.className=t.className+" "+e)},e.prototype.removeClass=function(t,e){t.className=t.className.replace(this.classRegex(e)," ")},e.prototype.isVisible=function(t){return t.offsetWidth||t.offsetHeight||t.getClientRects().length},e.prototype.slideDown=function(t,e){t.style.display="";var i=t.getBoundingClientRect().height;t.style.height=0,this.recalc(t.offsetHeight),t.style.transition="height "+e,t.style.height=i+"px",t.addEventListener("transitionend",function(){t.style.height=t.style.transition=t.style.display=""})},e.prototype.slideUp=function(t,e){var i=t.getBoundingClientRect().height;t.style.height=i+"px",this.recalc(t.offsetHeight),t.style.transition="height "+e,t.style.height=0,t.addEventListener("transitionend",function(){t.style.display="none"})},e.prototype.recalc=function(t){return t.offsetHeight},e.prototype.isTouchDevice=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},e.prototype.open=function(){this.openDatepicker()},e.prototype.close=function(){this.closeDatepicker()},e.prototype.getDatePicker=function(){return this.datepicker},e.prototype.setRange=function(t,e){"string"==typeof t&&"string"==typeof e&&(t=this.parseDate(t),e=this.parseDate(e)),this.setDateRange(t,e)},e.prototype.clear=function(){this.clearSelection()},e.prototype.getNights=function(){var t=0;if(this.start&&this.end)t=this.countDays(this.end,this.start)-1;else{var e=this.getValue(),i=e?e.split(this.separator):"";if(i&&i.length>=2){var s=this.format;s.match(/Do/)&&(s=s.replace(/Do/,"D"),i[0]=i[0].replace(/(\d+)(th|nd|st)/,"$1"),i[1]=i[1].replace(/(\d+)(th|nd|st)/,"$1")),t=this.countDays(this.parseDate(i[0],s),this.parseDate(i[1],s))-1}}return t},e.prototype.onTimeChanged=function(t){void 0!==t.dateRange&&t.setValue(t.dateRange)},e.prototype.pad=function(t,e){for(var i=String(t);i.length<e;)i="0"+i;return i},e.prototype.destroy=function(){document.getElementById(this.getDatepickerId())&&(this.removeAllBoundedListeners(this.input,"click"),this.removeAllBoundedListeners(document,"click"),this.removeAllBoundedListeners(this.input,"change"),this.datepicker.parentNode.removeChild(this.datepicker))},e}();
